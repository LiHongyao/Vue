{"version":3,"file":"vue.js","sources":["../src/compile/generate.js","../src/compile/parseAst.js","../src/compile/index.js","../src/observe/arr.js","../src/observe/index.js","../src/initState.js","../src/init.js","../src/index.js"],"sourcesContent":["/**\n *\n * <div id=\"app\"> Hello, {{msg}} <h1></h1></div>\n *\n * render() {\n *    return _c('div', { id: app, style: { ... } }, _v('hello', + _s(msg), _c))\n * }\n *\n */\n\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g;\n\n// 处理属性\nfunction genProps(attrs) {\n  console.log(attrs);\n  let str = '';\n  for (let i = 0; i < attrs.length; i++) {\n    let attr = attrs[i];\n    if (attr.name === 'style') {\n      // {name: 'style', value: 'color:red; font-size: 12px;'}\n      let obj = {};\n      attr.value.split(';').forEach((item) => {\n        // color:red\n        let [key, val] = item.split(':');\n        obj[key] = val;\n      });\n      attr.value = obj;\n    }\n    // 拼接\n    str += `${attr.name}:${JSON.stringify(attr.value)},`;\n  }\n  return `${str.slice(0, -1)}`;\n}\n\n// 处理子节点(1)\nfunction genChildren(el) {\n  let children = el.children;\n\n  if (children) {\n    return children.map((child) => gen(child)).join(',');\n  }\n}\nfunction gen(node) {\n  if (node.type === 1) {\n    // 元素\n    return generate(node);\n  } else {\n    // 文本 (1)普通文本 (2)插值表达式 {{}}\n    let text = node.text; // 获取文本\n    if (!defaultTagRE.test(text)) {\n      return `_v(${JSON.stringify(text)})`;\n    }\n    // 带有{{}}\n    let tokens = [];\n    let lastIndex = (defaultTagRE.lastIndex = 0);\n    let match;\n    while ((match = defaultTagRE.exec(text))) {\n      let index = match.index;\n      if (index > lastIndex) {\n        // 添加内容\n        tokens.push(JSON.stringify(text.slice(lastIndex, index))); // 内容\n      }\n      // {{}}\n      tokens.push(`_s(${match[1].trim()})`);\n      lastIndex = index + match[0].length;\n      //\n      if (lastIndex < text.length) {\n        tokens.push(JSON.stringify(text.slice(lastIndex)));\n      }\n      return `_v(${tokens.join('+')})`;\n    }\n  }\n}\n\nexport function generate(el) {\n  // 注意：属性 {id:app, style: { color: red, ...}}\n  let children = genChildren(el);\n\n  let code = `_c(${el.tag}, ${\n    el.attrs.length ? `${genProps(el.attrs)}` : 'null'\n  }, ${children ? `${children}` : 'null'})`;\n  console.log(code);\n}\n","// 用于解析标记和属性的正则表达式(源码仓库拷贝)\nconst attribute =\n  /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/; // 匹配属性\nconst dynamicArgAttribute =\n  /^\\s*((?:v-[\\w-]+:|@|:|#)\\[[^=]+?\\][^\\s\"'<>\\/=]*)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/;\nconst ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`; // 标签名称\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`; // <span:x>\nconst startTagOpen = new RegExp(`^<${qnameCapture}`); // 标签开头的正则，捕获的内容是标签名\nconst startTagClose = /^\\s*(\\/?)>/;\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`);\nconst doctype = /^<!DOCTYPE [^>]+>/i;\nconst comment = /^<!\\--/;\nconst conditionalComment = /^<!\\[/;\n\n// -- 创建AST语法树\nfunction createASTElement(tag, attrs) {\n  return {\n    tag, // 元素\n    attrs, // 属性\n    children: [], // 子节点\n    type: 1,\n    parent: null,\n  };\n}\nlet root; // 根元素\nlet createParent; // 当前元素的父节点\nlet stack = [];\n// -- 开始标签\nfunction start(tag, attrs) {\n  // 入栈\n  let element = createASTElement(tag, attrs);\n  if (!root) {\n    root = element;\n  }\n  createParent = element;\n  stack.push(element);\n}\n// -- 获取文本\nfunction charts(text) {\n  // 空格\n  text = text.replace(/\\s/g, '');\n  if (text) {\n    createParent.children.push({\n      type: 3,\n      text,\n    });\n  }\n}\n// -- 结束标签\nfunction end(tag) {\n  // 出栈\n  let element = stack.pop();\n  createParent = stack[stack.length - 1];\n  if (createParent) {\n    // 元素闭合\n    element.parent = createParent.tag;\n    createParent.children.push(element);\n  }\n}\n\nexport function parseHTML(html) {\n  // <div id=\"app\">Hello {{msg}}</div>\n  // html为空结束\n  while (html) {\n    const textEnd = html.indexOf('<');\n    // --- 标签\n    if (textEnd === 0) {\n      // （1）开始标签\n      const startTagMatch = parseStartTag(); // 开始标签的内容\n      if (startTagMatch) {\n        start(startTagMatch.tagName, startTagMatch.attrs);\n        continue;\n      }\n      // （2）结束标签\n      let endTagMatch = html.match(endTag);\n      if (endTagMatch) {\n        advance(endTagMatch[0].length);\n        end(endTagMatch[1]);\n        continue;\n      }\n    }\n    // --- 文本\n    if (textEnd > 0) {\n      const text = html.slice(0, textEnd);\n      if (text) {\n        advance(text.length);\n        charts(text);\n      }\n    }\n  }\n\n  function parseStartTag() {\n    const start = html.match(startTagOpen); // 1. 返回结果 2. false\n    if (start) {\n      // 创建AST语法树\n      const match = {\n        tagName: start[1],\n        attrs: [],\n      };\n      // 删除开始标签\n      advance(start[0].length);\n      // 属性\n      // 注意：多个属性，遍历\n      // 注意：>，标识开始标签结束\n      let attr;\n      let end;\n      while (\n        !(end = html.match(startTagClose)) &&\n        (attr = html.match(attribute))\n      ) {\n        match.attrs.push({\n          name: attr[1],\n          value: attr[3] || attr[4] || attr[5],\n        });\n        advance(attr[0].length);\n      }\n      if (end) {\n        advance(end[0].length);\n        return match;\n      }\n    }\n  }\n  function advance(n) {\n    html = html.slice(n);\n  }\n  return root;\n}\n","import { generate } from './generate.js';\nimport { parseHTML } from './parseAst.js';\n\nexport function compileToFunction(el) {\n  // 1. 将HTML解析成AST抽象语法树\n  const ast = parseHTML(el);\n  // 2. 将AST语法树转成 render 函数 （1）将AST 语法树变成字符串（2）字符串变成函数\n  let code = generate(ast);\n}\n","/*\n * @Author: Lee\n * @Date: 2023-06-07 11:24:21\n * @LastEditors: Lee\n * @LastEditTime: 2023-06-14 15:09:13\n * @Description:\n */\n\n// 重写数组\n// 1. 获取原来的数组方法\nconst oldArrayProtoMethods = Array.prototype;\n// 2. 继承\nexport const ArrayMethods = Object.create(oldArrayProtoMethods);\n// 3. 劫持\nconst methods = ['push', 'pop', 'shift', 'unshift', 'splice'];\nmethods.forEach((item) => {\n  ArrayMethods[item] = function (...args) {\n    // -- 数组追加对象的情况\n    let inserted;\n    switch (item) {\n      case 'push':\n      case 'unshift':\n        inserted = args;\n        break;\n      case 'splice':\n        inserted = args.splice(2);\n        break;\n    }\n    const ob = this.__ob__;\n    if (inserted) {\n      ob.observeArray(inserted); // 对添加的对象进行劫持\n    }\n    // -- 调用数组原始方法\n    return oldArrayProtoMethods[item].apply(this, args);\n  };\n});\n","/*\n * @Author: Lee\n * @Date: 2023-06-07 10:00:35\n * @LastEditors: Lee\n * @LastEditTime: 2023-06-14 15:00:23\n * @Description:\n */\n\nimport { ArrayMethods } from './arr';\n\nexport function observer(data) {\n  // 判断：data不是对象或不存在，直接返回\n  if (typeof data !== 'object' || data === null) {\n    return data;\n  }\n  // data为对象时，进行数据劫持\n  return new Observer(data);\n}\n\nclass Observer {\n  constructor(value) {\n    // 给value定义一个属性，在数组劫持（push/unshift/splice）时访问\n    Object.defineProperty(value, '__ob__', {\n      enumerable: false,\n      value: this,\n    });\n    if (Array.isArray(value)) {\n      // -- data如果是数组，则通过重写数组函数劫持\n      value.__proto__ = ArrayMethods;\n      // -- 数组对象的处理，如[{a:1}]，对对象元素{a:1}进行劫持\n      this.observeArray(value);\n    } else {\n      // -- data如果是对象，则通过遍历对象属性劫持\n      this.walk(value);\n    }\n  }\n  /**\n   * 由于Object.defineProperty只对单个属性设置\n   * 所以需要遍历数据对对象中的属性单独进行劫持\n   * @param {*} data\n   */\n  walk(data) {\n    let keys = Object.keys(data);\n    for (let i = 0; i < keys.length; i++) {\n      let key = keys[i];\n      let value = data[key];\n      defineReactive(data, key, value);\n    }\n  }\n  observeArray(value) {\n    for (let i = 0; i < value.length; i++) {\n      observer(value[i]);\n    }\n  }\n}\n\n/**\n * 数据劫持\n * @param {*} data\n * @param {*} key\n * @param {*} value\n */\nfunction defineReactive(data, key, value) {\n  observer(value); // 深度劫持\n  Object.defineProperty(data, key, {\n    get() {\n      return value;\n    },\n    set(newValue) {\n      if (newValue === value) return;\n      // 新值劫持\n      observer(newValue);\n      // 设置新值\n      // value 一直在闭包中，此处设置完之后，再 get 时也是会获取最新的\n      value = newValue;\n    },\n  });\n}\n\n/**\n * 对象劫持：{a: 1, b: 2, obj: {} }\n * 方法：Object.defineProperty\n * 该方法有缺陷，只能对对象中的一个属性进行劫持，所以需要遍历/递归进行劫持\n * 1. 遍历对象，只能劫持第1层\n * 2. 递归，深层劫持/新值劫持（set)\n */\n\n/**\n * 数组劫持：{list: [1, 2, 3], arr: [{a:1}]}\n * 方法：通过函数劫持，劫持数组方法\n */\n","import { observer } from './observe/index.js';\n\n/*\n * @Author: Lee\n * @Date: 2023-06-07 09:34:28\n * @LastEditors: Lee\n * @LastEditTime: 2023-06-14 14:52:06\n * @Description:\n */\nexport function initState(vm) {\n  let ops = vm.$options;\n  // 判断\n  if (ops.data) {\n    initData(vm);\n  }\n  if (ops.props) {\n    initProps(vm);\n  }\n  if (ops.watch) {\n    initWatch(vm);\n  }\n  if (ops.computed) {\n    initComputed(vm);\n  }\n  if (ops.methods) {\n    initMethods(vm);\n  }\n}\n\n// Vue2：对data初始化\nfunction initData(vm) {\n  let data = vm.$options.data;\n  // 由于data可能是函数，所以需判断当data为函数时调用它并拿到最终的对象，调用时需绑定this到vm实例上\n  data = vm.$data = typeof data === 'function' ? data.call(vm) : data;\n  // 数据劫持\n  observer(data);\n  // 将data上的所有属性代理到实例vm上\n  for (let key in data) {\n    proxy(vm, '$data', key);\n  }\n}\nfunction initProps() {}\nfunction initWatch() {}\nfunction initComputed() {}\nfunction initMethods() {}\n\nfunction proxy(vm, source, key) {\n  Object.defineProperty(vm, key, {\n    get() {\n      return vm[source][key];\n    },\n    set(newValue) {\n      vm[source][key] = newValue;\n    },\n  });\n}\n","/*\n * @Author: Lee\n * @Date: 2023-06-06 23:25:58\n * @LastEditors: Lee\n * @LastEditTime: 2023-06-14 16:08:21\n * @Description:\n */\nimport { compileToFunction } from './compile/index.js';\nimport { initState } from './initState';\n\nexport function initMixin(Vue) {\n  Vue.prototype._init = function (options) {\n    const vm = this;\n    vm.$options = options;\n    // 初始化状态\n    initState(vm);\n    // 渲染模板\n    if (vm.$options.el) {\n      vm.$mount(vm.$options.el);\n    }\n  };\n  // 创建$mount\n  Vue.prototype.$mount = function (el) {\n    // 模板编译渲染方式有三种：\n    // 1. template\n    // 2. render\n    // 3. el（必须要有）\n    el = document.querySelector(el); // 获取元素\n    const vm = this;\n    const options = vm.$options;\n    if (!options.render) {\n      const template = options.template;\n      if (!template && el) {\n        // 获取到html\n        el = el.outerHTML;\n        // 编译成AST抽象语法树\n        const ast = compileToFunction(el);\n      }\n    }\n  };\n}\n","/*\n * @Author: Lee\n * @Date: 2023-06-06 23:04:49\n * @LastEditors: Lee\n * @LastEditTime: 2023-06-14 16:07:51\n * @Description: \n */\nimport { initMixin } from './init';\n\nfunction Vue(options) {\n  this._init(options);\n}\n\ninitMixin(Vue);\n\nexport default Vue;\n"],"names":["defaultTagRE","genProps","attrs","console","log","str","i","length","attr","name","obj","value","split","forEach","item","key","val","JSON","stringify","slice","genChildren","el","children","map","child","gen","join","node","type","generate","text","test","tokens","lastIndex","match","exec","index","push","trim","code","tag","attribute","ncname","qnameCapture","startTagOpen","RegExp","startTagClose","endTag","createASTElement","parent","root","createParent","stack","start","element","charts","replace","end","pop","parseHTML","html","textEnd","indexOf","startTagMatch","parseStartTag","tagName","endTagMatch","advance","n","compileToFunction","ast","oldArrayProtoMethods","Array","prototype","ArrayMethods","Object","create","methods","args","inserted","splice","ob","__ob__","observeArray","apply","observer","data","Observer","constructor","defineProperty","enumerable","isArray","__proto__","walk","keys","defineReactive","get","set","newValue","initState","vm","ops","$options","initData","props","watch","computed","$data","call","proxy","source","initMixin","Vue","_init","options","$mount","document","querySelector","render","template","outerHTML"],"mappings":"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"}